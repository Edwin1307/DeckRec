<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DeckRec</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Roboto&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('/static/bgpic.jpeg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Roboto', sans-serif;
      color: #fff;
      text-align: center;
      padding: 50px 20px;
    }

    h1 {
      font-family: 'Cinzel', serif;
      font-size: 3em;
      color: gold;
      margin-bottom: 10px;
      text-shadow: 2px 2px 5px #000;
    }

    h3 {
      font-family: 'Cinzel', serif;
      font-size: 1.5em;
      color: #ffcc00;
      margin-bottom: 30px;
      text-shadow: 1px 1px 3px #000;
    }

    .form-container {
      background: rgba(0,0,0,0.6);
      padding: 25px;
      border-radius: 15px;
      display: inline-block;
      margin-bottom: 30px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    select {
      width: 200px;
      margin: 10px auto;
    }

    button {
      font-weight: bold;
      font-size: 1.2em;
      background-color: #ffdd00;
      color: #000;
      border: none;
      padding: 10px 25px;
      box-shadow: 2px 2px 10px #000;
      transition: transform 0.2s, background-color 0.2s;
      cursor: pointer;
    }

    button:hover {
      background-color: #ffe733;
      transform: scale(1.05);
    }

    .deck-display {
      margin-top: 30px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      justify-items: center;
    }

    .deck-card {
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border-radius: 12px;
      width: 120px;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 1px 1px 5px #000;
      text-align: center;
    }

    .deck-card:hover {
      transform: scale(1.1);
      box-shadow: 2px 2px 10px #000;
    }

    .deck-card img {
      width: 80px;
      margin-bottom: 5px;
      border-radius: 5px;
    }

  </style>
</head>
<body>
  <h1>DeckRec</h1>
  <h3>Build. Battle. Win.</h3>

  <div class="form-container">
    <div class="form-group">
      <label for="bracket">Trophy Range:</label>
      <select id="bracket" class="form-select">
        <option value="<2000">&lt; 2000</option>
        <option value="2000-4000">2000‑4000</option>
        <option value="4000-6000">4000‑6000</option>
        <option value=">6000">&gt; 6000</option>
      </select>
    </div>

    <div class="form-group">
      <label for="style">Playstyle:</label>
      <select id="style" class="form-select">
        <option value="attack">Attack</option>
        <option value="defense">Defense</option>
        <option value="balance">Balance</option>
      </select>
    </div>

    <button onclick="getDeck()">Get Deck</button>
  </div>

  <div id="deck-display" class="deck-display"></div>

  <script>
    async function getDeck() {
      const bracket = document.getElementById("bracket").value;
      const style = document.getElementById("style").value;
      const display = document.getElementById("deck-display");
      display.innerHTML = "";

      try {
        const response = await fetch("/recommend_deck", {

          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ bracket: bracket, style: style })
        });

        const data = await response.json();

        if (data.deck && Array.isArray(data.deck)) {
          data.deck.forEach(card => {
            const cardDiv = document.createElement("div");
            cardDiv.className = "deck-card";
            const imgSrc = card.image ? card.image : "https://via.placeholder.com/80x80?text=Card";
            cardDiv.innerHTML = `
              <img src="${imgSrc}" alt="${card.name}">
              <div>${card.name}</div>
            `;
            display.appendChild(cardDiv);
          });
        } else if (data.error) {
          display.innerText = data.error;
        } else {
          display.innerText = "Something went wrong!";
        }
      } catch (err) {
        display.innerText = "Error connecting to backend!";
        console.error(err);
      }
    }
  </script>
</body>
</html>
